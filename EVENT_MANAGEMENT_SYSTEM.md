# Система управления событиями (Event Management System)

## Описание
Полнофункциональная система управления событиями для администраторов и суперадминистраторов IT-школы, позволяющая создавать события/мероприятия и назначать их участников.

## Компоненты системы

### 1. Основная страница управления (`ManageEventsPage.jsx`)
- **Местоположение**: `/manage-events`
- **Доступ**: Только для ролей `admin` и `superadmin`
- **Функции**:
  - Просмотр всех событий в виде сетки карточек
  - Поиск событий по названию
  - Фильтрация по статусу (активные, предстоящие, прошедшие)
  - Создание новых событий
  - Редактирование существующих событий
  - Удаление событий с подтверждением

### 2. Модальное окно создания события (`EventCreateModal.jsx`)
- **Двухэтапный процесс создания**:
  1. **Основная информация**: название, описание, дата/время, аудитория
  2. **Выбор участников**: назначение событий пользователям, группам или всем
- **Валидация**: проверка корректности данных перед отправкой
- **Типы участников**:
  - Все пользователи системы
  - Конкретные группы (с множественным выбором)
  - Индивидуальные пользователи (с множественным выбором)

### 3. Модальное окно редактирования (`EventEditModal.jsx`)
- **Табированный интерфейс**:
  - **Информация о событии**: редактирование основных данных
  - **Участники**: управление текущими участниками
- **Функции управления участниками**:
  - Просмотр текущих участников
  - Добавление новых участников (группы/пользователи)
  - Удаление участников из события

### 4. Сервис для работы с API (`eventService.js`)
- **CRUD операции**:
  - `getAllEvents()` - получение всех событий
  - `createEvent()` - создание нового события
  - `updateEvent()` - обновление события
  - `deleteEvent()` - удаление события
- **Управление участниками**:
  - `getEventWithUsers()` - получение события с участниками
  - `addEventForGroup()` - добавление события для группы
  - `addEventForUsers()` - добавление события для пользователей
  - `removeUserFromEvent()` - удаление участника из события

### 5. Интеграция с расписанием (`scheduleService.js`)
- **Обновлена функция `getUserScheduleOptimized()`** для поддержки новой схемы API
- **Поддержка объединенного ответа**: обработка уроков и событий в едином запросе
- **Типизация элементов**: различение уроков (`type: 'lesson'`) и событий (`type: 'event'`)
- **Обратная совместимость**: сохранение работы существующих компонентов расписания

### 6. Стилизация (`ManageEventsPage.css`)
- **Адаптивный дизайн**: поддержка мобильных устройств
- **Современный UI**: карточки событий с тенями и анимациями
- **Интуитивные элементы**:
  - Цветные индикаторы статуса событий
  - Удобные кнопки действий
  - Чистые формы с валидацией
- **Accessibility**: поддержка клавиатурной навигации и ARIA-атрибутов

## Навигация
- **Добавлен пункт меню "Мероприятия"** в боковую панель для admin/superadmin
- **Маршрут `/manage-events`** добавлен в App.js
- **Иконка**: используется календарная иконка для визуального соответствия

## Схема API Backend
Система интегрируется с новыми эндпоинтами Events API:
- `GET /events/` - получение всех событий
- `POST /events/` - создание события
- `PUT /events/{event_id}` - обновление события
- `DELETE /events/{event_id}` - удаление события
- `GET /events/{event_id}/with-users` - получение события с участниками
- `POST /events/group/{group_id}` - добавление события для группы
- `POST /events/users` - добавление события для пользователей
- `DELETE /events/{event_id}/users/{user_id}` - удаление участника

## Новая схема расписания
Эндпоинт `/schedule/` теперь возвращает объект:
```json
{
  "lessons": [...],
  "events": [...]
}
```

## Особенности реализации
1. **Модульная архитектура**: каждый компонент отвечает за свою функцию
2. **Переиспользование кода**: использование существующих сервисов (userService, groupService)
3. **Error handling**: обработка ошибок на всех уровнях
4. **Loading states**: индикаторы загрузки для лучшего UX
5. **Responsive design**: адаптация под все размеры экранов
6. **TypeScript ready**: подготовлена для миграции на TypeScript

## Безопасность
- **Роли пользователей**: доступ только для admin/superadmin
- **Валидация данных**: проверка на фронтенде и бэкенде
- **Подтверждения**: критические действия требуют подтверждения

## Тестирование
Система готова к тестированию:
1. Запустите сервер разработки: `npm start`
2. Войдите под учетной записью admin/superadmin
3. Перейдите в раздел "Мероприятия" в боковом меню
4. Создайте тестовое событие и назначьте участников
