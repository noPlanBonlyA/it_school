# Возрастная фильтрация курсов для студентов

## Обзор

Реализована автоматическая фильтрация курсов по возрастным категориям для студентов. Студенты теперь видят только те курсы, которые подходят их возрасту.

## Как работает фильтрация

### 1. Определение возраста студента
- Возраст вычисляется из поля `birth_date` в профиле пользователя
- Учитывается полная дата рождения (год, месяц, день)
- Если дата рождения не указана, фильтрация не применяется

### 2. Возрастные категории курсов
Система поддерживает следующие форматы возрастных категорий в курсах:

#### Универсальные категории:
- `"Все возрасты"` или `"All"` - курс доступен всем
- `null` или отсутствие категории - курс доступен всем

#### Диапазоны возрастов:
- `"5-7"` - для детей от 5 до 7 лет
- `"8-10"` - для детей от 8 до 10 лет  
- `"12-14"` - для подростков от 12 до 14 лет

#### Минимальный возраст:
- `"6+"` - для студентов от 6 лет и старше
- `"12+"` - для студентов от 12 лет и старше

#### Совместимость со старыми значениями:
- `"SixPlus"` - преобразуется в фильтр "от 6 лет"
- `"TwelvePlus"` - преобразуется в фильтр "от 12 лет"

## Изменения в коде

### 1. Обновленный сервис курсов (`src/services/courseService.js`)

#### Новые функции:
```javascript
// Вычисляет возраст по дате рождения
function calculateAge(birthDate)

// Проверяет подходит ли курс студенту по возрасту  
function isCourseSuitableForAge(course, studentAge)

// Получает курсы с фильтрацией по возрасту
export async function getAllCoursesFiltered(studentUser, limit, offset)
```

#### Алгоритм фильтрации:
1. Получение всех курсов через API
2. Вычисление возраста студента из `birth_date`
3. Проверка каждого курса на соответствие возрасту
4. Возврат отфильтрованного списка

### 2. Обновленная страница курсов студента (`src/pages/StudentCoursesPage.jsx`)

#### Изменения:
- Использует `getAllCoursesFiltered()` вместо `getAllCourses()`
- Передает объект пользователя для возрастной фильтрации
- Показывает информацию о возрастной фильтрации
- Отображает возраст студента в интерфейсе

#### Новый UI:
- Информационное сообщение о возрастной фильтрации
- Показ текущего возраста студента
- Обновленная справочная информация

## Примеры работы

### Студент 8 лет (birth_date: "2016-03-15"):
**Увидит курсы:**
- "Все возрасты"
- "5-7" ❌ (слишком старый)
- "8-10" ✅
- "6+" ✅
- "12+" ❌ (слишком молодой)

### Студент 14 лет (birth_date: "2010-11-20"):
**Увидит курсы:**
- "Все возрасты" ✅
- "12-14" ✅  
- "8-10" ❌ (слишком старый)
- "12+" ✅
- "6+" ✅

### Студент без указанной даты рождения:
**Увидит:** Все курсы (фильтрация не применяется)

## Преимущества

1. **Персонализация контента** - студенты видят только подходящие им курсы
2. **Улучшенный UX** - меньше курсов для просмотра, больше релевантности
3. **Автоматичность** - никаких дополнительных действий от пользователя
4. **Прозрачность** - студент видит свой возраст и понимает принцип фильтрации
5. **Обратная совместимость** - работает со старыми форматами возрастных категорий

## Совместимость

- ✅ Полностью совместимо с существующими курсами
- ✅ Работает со всеми форматами возрастных категорий
- ✅ Если возраст не указан - показывает все курсы
- ✅ Администраторы и преподаватели видят все курсы без фильтрации

## Настройка

Для корректной работы фильтрации убедитесь что:

1. **У студентов заполнена дата рождения** в профиле
2. **У курсов указаны возрастные категории** при создании
3. **Возрастные категории соответствуют** поддерживаемым форматам

## Дальнейшие улучшения

Возможные доработки:
- Добавление настройки "показать все курсы" для продвинутых студентов
- Уведомления о новых курсах, подходящих по возрасту
- Статистика по возрастным предпочтениям
- Рекомендательная система на основе возраста и интересов
