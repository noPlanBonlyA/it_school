# Исправление передачи age_category как массива

## Обзор изменений

Исправлена проблема с передачей поля `age_category` при создании и обновлении курсов. Теперь поле корректно передается как массив в соответствии с требованиями API.

## Выполненные изменения

### 1. ManageCourse.jsx

**Исправления в создании курса:**
- `age_category: form.age_category` → `age_category: [form.age_category]`

**Исправления в обновлении курса:**
- `age_category: edit.age_category` → `age_category: [edit.age_category]`

**Исправления в обработке получения курса:**
- Добавлена проверка `Array.isArray(c.age_category)` в функции `handleSelect`
- Если возрастная категория приходит как массив, берется первый элемент для отображения

### 2. CourseCard.jsx

**Исправления отображения:**
- Добавлена обработка `age_category` как массива или строки
- Если массив, то элементы соединяются через запятую: `course.age_category.join(', ')`

### 3. StudentCoursesPage.jsx

**Исправления в функции renderCourseCard:**
- Добавлена аналогичная обработка `age_category` как массива или строки
- Корректное отображение в интерфейсе студентов

## Технические детали

### Структура данных

**До изменений:**
```javascript
// Создание
courseData = {
  name: "Курс",
  age_category: "All"  // Строка
}

// Отображение
<span>{course.age_category}</span>  // Напрямую как строка
```

**После изменений:**
```javascript
// Создание
courseData = {
  name: "Курс", 
  age_category: ["All"]  // Массив
}

// Отображение
const ageCategory = Array.isArray(course.age_category) 
  ? course.age_category.join(', ') 
  : course.age_category;
<span>{ageCategory}</span>
```

### Обратная совместимость

Изменения полностью обратно совместимы:
- Если с сервера приходит строка, отображается как раньше
- Если с сервера приходит массив, корректно обрабатывается и отображается
- При отправке на сервер всегда передается массив

### Поддерживаемые значения возрастных категорий

- `["All"]` - Все возрасты
- `["SixPlus"]` - 6+
- `["TwelvePlus"]` - 12+

## Пользовательский интерфейс

UI остался без изменений - по-прежнему используется выпадающий список для выбора одной возрастной категории. В будущем можно легко расширить до множественного выбора.

## Протестированные сценарии

1. ✅ Создание нового курса с возрастной категорией
2. ✅ Обновление существующего курса
3. ✅ Отображение курсов в списке управления
4. ✅ Отображение курсов на странице студентов
5. ✅ Работа с существующими курсами (обратная совместимость)

## Связанные файлы

- `/src/pages/ManageCourse.jsx` - основная логика создания/обновления
- `/src/components/CourseCard.jsx` - компонент карточки курса
- `/src/pages/StudentCoursesPage.jsx` - страница курсов студента

## API изменения

**Эндпоинт:** `POST /api/courses/` и `PUT /api/courses/{id}/`

**Payload изменения:**
```json
{
  "name": "Название курса",
  "description": "Описание",
  "age_category": ["All"],  // Теперь массив вместо строки
  "author_name": "Автор"
}
```

Это исправление завершает задачу по корректной передаче возрастных категорий в API курсов.
